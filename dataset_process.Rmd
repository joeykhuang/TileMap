---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 

```{r}
datasets = fs::path_ext_remove(unique(list.files("data/")))

for (dataset_name in datasets) {
  data <- read.csv(paste0("data/", dataset_name, ".csv"))
  data_proc <- pivot_longer(data, cols = !X, names_to = "gene", values_to = "fold") %>%
        rename(condition = X)
  write.csv(data_proc, paste0("TileMap/datasets/", dataset_name, ".csv"))
}

```

Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

```{r}
library(pathwayMatch)
library(DOSE)
library("org.Hs.eg.db")

muscle <- read.csv("TileMap/datasets/muscle.csv")
```

```{r}

ens <- muscle$gene

symbols <- mapIds(org.Hs.eg.db, keys = ens, column = c('ENTREZID'), keytype = 'SYMBOL')
symbols <- symbols[!is.na(symbols)]
symbols <- symbols[match(ens, names(symbols))]
muscle$entrezgene <- symbols

kk1 <- enrichKEGG(gene = muscle$entrezgene,
                 organism = 'hsa')
```

